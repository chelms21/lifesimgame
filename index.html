<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vexel Village</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="falling-elements-container"></div>
    <div class="container">
        <h1>ğŸ˜ï¸ Vexel Village on Maple Island ğŸ˜ï¸</h1>
        
        <div id="creation-screen" class="screen">
            <h2>Start Your Village</h2>
            
            <label for="game-mode-select">Game Mode:</label>
            <select id="game-mode-select">
                <option value="manual">Manual âœ‹ (You manage everything)</option>
                <option value="automatic">Automatic ğŸ¤– (Miis act autonomously)</option>
            </select>

            <label for="game-difficulty-select">Difficulty:</label>
            <select id="game-difficulty-select">
                <option value="normal">Normal ğŸ˜… (Standard start)</option>
                <option value="easy">Easy ğŸ˜ (Start with Caretaker & extra cash)</option>
            </select>
            
            <hr>

            <h2>Create Your First Vexel</h2>
            <p>You need at least one Vexel to start your town.</p>
            <label for="mii-name-input">Vexel Name:</label>
            <input type="text" id="mii-name-input" placeholder="e.g., Tom, Amy, Bob" maxlength="15">
            
            <label for="mii-gender-select">Gender:</label>
            <select id="mii-gender-select">
                <option value="male">Male â™‚ï¸</option>
                <option value="female">Female â™€ï¸</option>
            </select>
            
            <label for="mii-personality-select">Personality:</label>
            <select id="mii-personality-select">
                <option value="easygoing">Easygoing</option>
                <option value="energetic">Energetic</option>
                <option value="laid-back">Laid-back</option>
                <option value="stubborn">Stubborn</option>
            </select>
            
            <button onclick="addMiiToTown()">Add Vexel to Village</button>
            <hr>
            <p>Current Residents: <span id="resident-count">0</span></p>
            <button onclick="startGame()" id="start-town-button" disabled>Start Village Life (Requires 1+ Vexel)</button>
        </div>

        <div id="game-screen" class="screen hidden">
            
            <div class="town-status-bar">
                <p>ğŸ’° Money: <span id="money-stat">0</span></p>
                <button onclick="workForMoney()">ğŸ’¼ Work (+$10)</button>
                <button onclick="openInvestmentModal()">ğŸ“ˆ Invest</button>
                <button onclick="openBankModal()">ğŸ¦ Bank Savings</button>
                <button onclick="throwParty()" id="party-button">ğŸ‰ Throw Party (ğŸ’°150)</button>
                <button onclick="openBuildModal()">ğŸ—ï¸ Build Town</button>
            </div>
            
            <div class="management-status">
                <p>Caretaker Status: 
                    <span id="caretaker-status"></span>
                </p>
            </div>

            <div class="resident-list-area">
                <h3>Town Residents</h3>
                <div id="resident-list" class="resident-grid">
                    </div>
            </div>

            <div class="mii-selector">
                <label for="mii-select">Select Vexel to Interact:</label>
                <select id="mii-select" onchange="switchMii()"></select>
            </div>

            <div class="mii-card">
                <h2 id="mii-name"></h2>
                
                <div id="mii-request-box" class="request-box hidden">
                    <p>I want a <span id="requested-item-name"></span>!</p>
                </div>
                
                <div class="mii-avatar">
                    <div class="face">
                        <div class="eyes"></div>
                        <div class="mouth"></div>
                    </div>
                </div>
                
                <div class="stats">
                    <p>Gender: <span id="gender-stat"></span></p>
                    <p>Personality: <span id="personality-stat"></span></p>
                    <p>Relationship: <span id="relationship-stat">Single</span></p> 
                    <p>Job: <span id="job-stat" onclick="openJobModal()" style="cursor: pointer;"></span></p> 
                    <p>Housing: <span id="housing-stat"></span></p> 
                    
                    <p>â¤ï¸ Happiness: <span id="happiness-stat"></span></p>
                    <div class="bar-container"><div id="happiness-bar" class="stat-bar happy"></div></div>
                    
                    <p>ğŸ” Hunger: <span id="hunger-stat"></span></p>
                    <div class="bar-container"><div id="hunger-bar" class="stat-bar full"></div></div>
                </div>

                <div class="message-box">
                    <p id="mii-message"></p>
                </div>
            </div>

            <div class="actions">
                <button onclick="openStore()">ğŸ›’ Maple Store</button>
                <button onclick="openRelationshipModal()" id="relationship-button">â¤ï¸ Interact / Date</button>
                <button onclick="toggleSleep()" id="sleep-button">ğŸ›Œ Go to Sleep</button>
                <button onclick="openNewMiiCreation()">â• New Resident</button>
                <a href="tutorial.txt" target="_blank" class="button-link"><button>ğŸ“˜ Tutorial</button></a>
            </div>
            
            <div class="inventory-area">
                <h3>ğŸ’ Inventory (Click to use on selected Vexel)</h3>
                <div id="inventory-list" class="inventory-grid">
                    </div>
            </div>

            <div class="save-area">
                <button onclick="saveGame()">ğŸ’¾ Save Game</button>
                <button onclick="resetGame()">ğŸ—‘ï¸ Reset Game</button>
                <p id="save-message" class="message-box"></p>
                
                <div id="event-log-container" class="event-log">
                    <h3>Village Log (Last 5 Events)</h3>
                    </div>
            </div>
        </div>
        
        <div id="store-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ›’ Maple Store</h2>
                <p>Current Money: <span id="store-money">0</span></p>
                <div id="store-items" class="store-grid">
                    </div>
                <button onclick="closeStore()">Close Store</button>
            </div>
        </div>

        <div id="bank-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ¦ Maple Town Bank</h2>
                <p>Current Money: ğŸ’°<span id="bank-current-money">0</span></p>
                <hr>
                <h3>Savings Account</h3>
                <p>Current Savings: ğŸ’°<span id="savings-total">0</span></p>
                <p>Interest Rate: **1% per tick** (Guaranteed Growth)</p>

                <label for="savings-deposit-amount">Amount to Deposit:</label>
                <input type="number" id="savings-deposit-amount" min="10" placeholder="Min 10 Gold">
                <button onclick="depositSavings()">Deposit</button>
                
                <hr>
                
                <label for="savings-withdraw-amount">Amount to Withdraw:</label>
                <input type="number" id="savings-withdraw-amount" min="10" placeholder="Min 10 Gold">
                <button onclick="withdrawSavings()">Withdraw</button>
                
                <button onclick="closeBankModal()">Close Bank</button>
            </div>
        </div>
        
        <div id="new-mii-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Create New Resident</h2>
                <label for="new-mii-name-input">Vexel Name:</label>
                <input type="text" id="new-mii-name-input" placeholder="e.g., Jane, Alex" maxlength="15">
                
                <label for="new-mii-gender-select">Gender:</label>
                <select id="new-mii-gender-select">
                    <option value="male">Male â™‚ï¸</option>
                    <option value="female">Female â™€ï¸</option>
                </select>
                
                <label for="new-mii-personality-select">Personality:</label>
                <select id="new-mii-personality-select">
                    <option value="easygoing">Easygoing</option>
                    <option value="energetic">Energetic</option>
                    <option value="laid-back">Laid-back</option>
                    <option value="stubborn">Stubborn</option>
                </select>
                <button onclick="addNewMii()">Add to Town</button>
                <button onclick="closeNewMiiModal()">Cancel</button>
            </div>
        </div>

        <div id="investment-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ“ˆ Town Investment Fund</h2>
                <p>Current Money: ğŸ’°<span id="investment-money">0</span></p> <p>Current Funds: ğŸ’°<span id="investment-total">0</span></p>
                <p>Passive Income: ğŸ’°<span id="investment-rate">0</span>/tick</p>

                <label for="investment-amount">Amount to Invest:</label>
                <input type="number" id="investment-amount" min="10" placeholder="Min 10 Gold">
                <p class="small-note">Note: Every ğŸ’°100 invested yields ğŸ’°1/tick passive income.</p>
                <button onclick="makeInvestment()">Invest Funds</button>
                <button onclick="closeInvestmentModal()">Close</button>
            </div>
        </div>

        <div id="relationship-modal" class="modal hidden">
            <div class="modal-content">
                <h2 id="rel-mii-name"></h2>
                <p>Current Relationship Status: <span id="rel-status"></span></p>
                
                <div id="rel-actions">
                    </div>
                
                <div id="rel-friendship-list" class="rel-list">
                    <h3>Friends:</h3>
                    <ul id="rel-friends-ul"></ul>
                </div>

                <button onclick="closeRelationshipModal()">Close</button>
            </div>
        </div>
        
        <div id="job-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ’¼ Career Center</h2>
                <h3 id="job-mii-name"></h3>
                <p>Current Job: <span id="job-current-job"></span></p>
                <hr>
                
                <h3>Available Careers (Click to Apply)</h3>
                <div id="job-list" class="store-grid">
                    </div>

                <button onclick="closeJobModal()">Close</button>
            </div>
        </div>

        <div id="build-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ—ï¸ Town Building Management</h2>
                <p>Current Money: ğŸ’°<span id="build-money">0</span></p>
                <hr>

                <h3>Houses / Apartments</h3>
                <p>Total Houses: <span id="house-capacity">0 houses (0 slots)</span></p>
                <p>Residents Housed: <span id="mii-count-housing">0</span></p>
                <p class="warning-text">Homeless Vexels: <span id="homeless-count">0</span> (Cost: ğŸ’°300 per house)</p>
                <button onclick="buildHouse()">Build New House (ğŸ’°300)</button>
                
                <hr>

                <h3>Town Facilities</h3>
                <div id="facility-list" class="store-grid">
                    </div>

                <button onclick="closeBuildModal()">Close</button>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
